<mxfile host="app.diagrams.net" modified="2026-01-06T00:00:00.000Z" agent="Draw.io" version="22.0.0" type="device">
  <diagram name="Playlist Management Activity Diagram" id="activity-diagram">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="Activity Diagram - Playlist Management" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="210" y="10" width="520" height="30" as="geometry"/>
        </mxCell>

        <!-- Swimlanes (black/white like reference) -->
        <mxCell id="lane-user" value="User" style="swimlane;startSize=30;fillColor=#ffffff;strokeColor=#000000;fontSize=14;fontStyle=1;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="300" height="1100" as="geometry"/>
        </mxCell>
        <mxCell id="lane-system" value="music stream service" style="swimlane;startSize=30;fillColor=#ffffff;strokeColor=#000000;fontSize=14;fontStyle=1;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="50" width="500" height="1100" as="geometry"/>
        </mxCell>

        <!-- Common styles (white fill, black stroke) -->

        <!-- Start node -->
        <mxCell id="start" value="" style="ellipse;html=1;fillColor=#000000;strokeColor=#000000;" vertex="1" parent="lane-user">
          <mxGeometry x="125" y="55" width="26" height="26" as="geometry"/>
        </mxCell>

        <!-- User actions -->
        <mxCell id="u_click_create" value="Click &quot;Create Playlist&quot; button" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-user">
          <mxGeometry x="40" y="110" width="220" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="u_enter_info" value="Enter playlist name&#xa;&amp; description" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-user">
          <mxGeometry x="60" y="270" width="200" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="u_click_create_confirm" value="Click &quot;Create&quot; button" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-user">
          <mxGeometry x="60" y="360" width="200" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="u_browse_songs" value="Browse songs to add" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-user">
          <mxGeometry x="60" y="630" width="200" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="u_click_add" value="Click &quot;Add to Playlist&quot; button" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-user">
          <mxGeometry x="60" y="720" width="200" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="u_view_playlist" value="View playlist with songs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-user">
          <mxGeometry x="60" y="990" width="200" height="50" as="geometry"/>
        </mxCell>

        <!-- System actions / decisions -->
        <mxCell id="s_logged_in" value="User logged in?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="180" y="110" width="140" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="s_show_auth" value="Show Auth Modal" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="350" y="110" width="130" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="s_open_playlist_modal" value="Open PlaylistModal&#xa;(usePlaylistModal.onOpen)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="140" y="220" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="s_display_form" value="Display create playlist form" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="160" y="300" width="200" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="s_validate" value="Validate input&#xa;(react-hook-form)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="160" y="390" width="200" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="s_valid" value="Valid?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="200" y="470" width="120" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="s_show_validation_error" value="Show validation error" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="350" y="485" width="140" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="s_insert_playlist" value="Insert playlist to Supabase&#xa;(playlists table)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="150" y="565" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="s_close_modal" value="Close modal&#xa;router.refresh()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="170" y="640" width="200" height="55" as="geometry"/>
        </mxCell>

        <mxCell id="s_get_max_pos" value="Get current max position&#xa;in playlist_songs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="150" y="735" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="s_insert_playlist_song" value="Insert song to playlist_songs&#xa;(playlist_id, song_id, position)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="130" y="820" width="260" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="s_already_exists" value="Already exists?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="200" y="915" width="120" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="s_exists_error" value="Show &quot;Song already&#xa;in playlist!&quot; error" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fontSize=12;" vertex="1" parent="lane-system">
          <mxGeometry x="350" y="930" width="150" height="60" as="geometry"/>
        </mxCell>

        <!-- End (bullseye) -->
        <mxCell id="end_outer" value="" style="ellipse;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="lane-system">
          <mxGeometry x="245" y="1040" width="28" height="28" as="geometry"/>
        </mxCell>
        <mxCell id="end_inner" value="" style="ellipse;html=1;fillColor=#000000;strokeColor=#000000;" vertex="1" parent="lane-system">
          <mxGeometry x="254" y="1049" width="10" height="10" as="geometry"/>
        </mxCell>

        <!-- Edges (orthogonal; pre-routed to avoid overlaps) -->
        <mxCell id="e_start_click" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="start" target="u_click_create">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e_click_logged" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="u_click_create" target="s_logged_in">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- No -> Auth modal (top route) -->
        <mxCell id="e_logged_no" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_logged_in" target="s_show_auth">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="820" y="130"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Auth modal back to click (top loop, no overlaps) -->
        <mxCell id="e_auth_back" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_show_auth" target="u_click_create">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="820" y="70"/>
              <mxPoint x="120" y="70"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Yes -> open playlist modal -->
        <mxCell id="e_logged_yes" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_logged_in" target="s_open_playlist_modal">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e_open_display" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_open_playlist_modal" target="s_display_form">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Display form to user enter info (left route) -->
        <mxCell id="e_display_to_enter" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_display_form" target="u_enter_info">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="380" y="330"/>
              <mxPoint x="300" y="300"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="e_enter_to_click_create" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="u_enter_info" target="u_click_create_confirm">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e_click_create_to_validate" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="u_click_create_confirm" target="s_validate">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e_validate_to_valid" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_validate" target="s_valid">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Invalid -> show validation error -->
        <mxCell id="e_valid_invalid" value="Invalid" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_valid" target="s_show_validation_error">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="0" y="-10" as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- Validation error back to enter info (non-overlap right loop) -->
        <mxCell id="e_validation_back" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_show_validation_error" target="u_enter_info">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="840" y="330"/>
              <mxPoint x="840" y="300"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Valid -> insert playlist -->
        <mxCell id="e_valid_valid" value="Valid" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_valid" target="s_insert_playlist">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="0" y="10" as="offset"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="e_insert_to_close" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_insert_playlist" target="s_close_modal">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Close modal to browse songs (left route) -->
        <mxCell id="e_close_to_browse" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_close_modal" target="u_browse_songs">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="380" y="680"/>
              <mxPoint x="300" y="655"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="e_browse_to_add" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="u_browse_songs" target="u_click_add">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e_add_to_maxpos" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="u_click_add" target="s_get_max_pos">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e_maxpos_to_insert_song" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_get_max_pos" target="s_insert_playlist_song">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e_insert_song_to_exists" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_insert_playlist_song" target="s_already_exists">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Exists? Yes -> show error -->
        <mxCell id="e_exists_yes" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_already_exists" target="s_exists_error">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="820" y="955"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Exists error to end (right route) -->
        <mxCell id="e_error_to_end" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_exists_error" target="end_outer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="820" y="1080"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Exists? No -> view playlist (left route) -->
        <mxCell id="e_exists_no_to_view" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="s_already_exists" target="u_view_playlist">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="380" y="980"/>
              <mxPoint x="300" y="1015"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- View playlist to end -->
        <mxCell id="e_view_to_end" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;endArrow=block;endFill=1;strokeColor=#000000;" edge="1" parent="1" source="u_view_playlist" target="end_outer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="300" y="1070"/>
            </Array>
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
